# 🍅 Pomki Backend 테스트 체크리스트

## 📋 테스트 완료 현황

### ✅ 기본 환경 설정
- [ ] 애플리케이션 정상 실행 (`./gradlew bootRun`)
- [ ] H2 데이터베이스 연결 확인
- [ ] Swagger UI 접속 가능 (`/swagger-ui.html`)
- [ ] Actuator 헬스체크 통과 (`/actuator/health`)

---

## 🔐 인증 & 권한 테스트

### 회원가입 & 로그인
- [ ] **POST /api/auth/signup** - 신규 회원가입
  - [ ] 유효한 이메일, 비밀번호, 닉네임으로 가입 성공
  - [ ] 중복 이메일 가입 시도 → 400 오류
  - [ ] 잘못된 이메일 형식 → 400 오류
  - [ ] 비밀번호 미입력 → 400 오류

- [ ] **POST /api/auth/login** - 로그인
  - [ ] 올바른 이메일/비밀번호 → 토큰 반환
  - [ ] 잘못된 비밀번호 → 401 오류
  - [ ] 존재하지 않는 이메일 → 401 오류

### 토큰 인증
- [ ] 유효한 토큰으로 보호된 API 호출 → 성공
- [ ] 토큰 없이 보호된 API 호출 → 401 오류
- [ ] 잘못된 토큰으로 API 호출 → 401 오류

---

## 📝 노트 관리 테스트

### 노트 CRUD
- [ ] **POST /api/notes** - 노트 생성
  - [ ] 제목과 내용으로 노트 생성 성공
  - [ ] 제목 없이 생성 시도 → 400 오류
  - [ ] 내용 없이 생성 시도 → 400 오류
  - [ ] 생성된 노트에 UUID 할당 확인

- [ ] **GET /api/notes** - 노트 목록 조회
  - [ ] 페이징 기본값 (page=0, size=20) 확인
  - [ ] 커스텀 페이징 동작 확인
  - [ ] 빈 목록 시 올바른 응답 확인

- [ ] **GET /api/notes/{noteId}** - 노트 상세 조회
  - [ ] 존재하는 노트 조회 성공
  - [ ] 존재하지 않는 노트 조회 → 404 오류
  - [ ] 다른 사용자 노트 조회 → 403 오류

- [ ] **PUT /api/notes/{noteId}** - 노트 수정
  - [ ] 제목, 내용 수정 성공
  - [ ] 수정 일시 자동 업데이트 확인
  - [ ] 다른 사용자 노트 수정 → 403 오류

- [ ] **DELETE /api/notes/{noteId}** - 노트 삭제
  - [ ] 논리적 삭제 성공 (isDeleted = true)
  - [ ] 삭제된 노트 목록에서 제외 확인
  - [ ] 다른 사용자 노트 삭제 → 403 오류

---

## 🤖 AI 기능 테스트

### AI 서비스 상태
- [ ] **GET /api/ai/status** - AI 서비스 상태 확인
  - [ ] 정상 상태 응답 확인
  - [ ] API 키 없을 때 비활성 상태 응답

### 노트 폴리싱
- [ ] **POST /api/ai/polish-note** - 노트 AI 폴리싱
  - [ ] `summary` 스타일 폴리싱 성공
  - [ ] `detail` 스타일 폴리싱 성공
  - [ ] `concept` 스타일 폴리싱 성공
  - [ ] `clean` 스타일 폴리싱 성공
  - [ ] 존재하지 않는 노트 폴리싱 → 404 오류
  - [ ] 폴리싱 결과에 원본 내용 포함 확인

- [ ] **POST /api/ai/apply-polish/{noteId}** - 폴리싱 결과 적용
  - [ ] 폴리싱된 내용으로 노트 업데이트 성공
  - [ ] aiEnhanced 플래그 true로 설정 확인
  - [ ] 수정 일시 업데이트 확인

---

## 🍅 포모도로 타이머 테스트

### 세션 생성 & 관리
- [ ] **POST /api/pomodoro/quick-start** - 빠른 시작
  - [ ] 기본 25분 집중 세션 생성 성공
  - [ ] 사용자 정의 시간으로 세션 생성
  - [ ] 이미 진행 중인 세션 있을 때 → 409 오류

- [ ] **POST /api/pomodoro/sessions** - 세션 생성
  - [ ] FOCUS 세션 생성 성공
  - [ ] SHORT_BREAK 세션 생성 성공
  - [ ] LONG_BREAK 세션 생성 성공
  - [ ] 유효하지 않은 세션 타입 → 400 오류

- [ ] **GET /api/pomodoro/current** - 현재 세션 조회
  - [ ] 진행 중인 세션 정보 반환
  - [ ] 진행 중인 세션 없을 때 적절한 응답
  - [ ] 남은 시간 계산 정확성 확인

### 세션 진행 관리
- [ ] **POST /api/pomodoro/sessions/{sessionId}/start** - 세션 시작
  - [ ] 생성된 세션 시작 성공
  - [ ] 이미 시작된 세션 다시 시작 → 409 오류
  - [ ] 존재하지 않는 세션 시작 → 404 오류

- [ ] **PUT /api/pomodoro/sessions/{sessionId}/notes** - 실시간 메모
  - [ ] 진행 중인 세션에 메모 추가 성공
  - [ ] 완료된 세션에 메모 추가 → 400 오류
  - [ ] 메모 내용 실시간 업데이트 확인

- [ ] **POST /api/pomodoro/sessions/{sessionId}/complete** - 세션 완료
  - [ ] 진행 중인 세션 완료 성공
  - [ ] AI 요약 생성 옵션 동작 확인
  - [ ] 실제 소요 시간 기록 확인
  - [ ] 완료 일시 자동 설정 확인

### AI 연동 기능
- [ ] **POST /api/pomodoro/sessions/{sessionId}/generate-note** - 노트 자동 생성
  - [ ] 완료된 세션에서 노트 생성 성공
  - [ ] AI 요약 내용을 포함한 노트 생성
  - [ ] 생성된 노트에 적절한 제목 자동 할당
  - [ ] 메모 없는 세션에서 노트 생성 시 기본 내용

### 포모도로 사이클
- [ ] **GET /api/pomodoro/cycle-suggestion** - 사이클 권장
  - [ ] 첫 세션: FOCUS 권장
  - [ ] 집중 완료 후: SHORT_BREAK 권장
  - [ ] 4번째 집중 완료 후: LONG_BREAK 권장
  - [ ] 권장 시간 정확성 확인

### 통계 기능
- [ ] **GET /api/pomodoro/stats** - 포모도로 통계
  - [ ] 총 세션 수 정확성
  - [ ] 완료 세션 수 정확성
  - [ ] 총 집중 시간 계산 정확성
  - [ ] 완료율 계산 정확성
  - [ ] 오늘 통계 정확성

---

## 📊 통계 & 대시보드 테스트

### 통합 통계
- [ ] **GET /api/simple-stats** - 통합 학습 통계
  - [ ] 오늘 통계 (집중시간, 노트수, 세션수) 정확성
  - [ ] 주간 통계 계산 정확성
  - [ ] 누적 통계 정확성
  - [ ] 통계 데이터 일관성 확인

---

## 🔄 통합 워크플로우 테스트

### 전체 학습 플로우
- [ ] **시나리오 1**: 회원가입 → 로그인 → 첫 포모도로 세션
- [ ] **시나리오 2**: 포모도로 시작 → 실시간 메모 → AI 요약 → 노트 생성
- [ ] **시나리오 3**: 기존 노트 → AI 폴리싱 → 개선된 노트
- [ ] **시나리오 4**: 포모도로 사이클 완주 (25분 집중 → 5분 휴식 반복)
- [ ] **시나리오 5**: 다양한 활동 → 통계 정확성 검증

### 데이터 일관성
- [ ] 생성된 노트가 목록에서 확인됨
- [ ] 완료된 포모도로 세션이 통계에 반영됨
- [ ] AI 기능 사용 이력이 정확히 기록됨
- [ ] 사용자별 데이터 격리 확인

---

## 🚨 오류 처리 테스트

### 인증 오류
- [ ] 토큰 없이 보호된 API 호출 → 401
- [ ] 만료된 토큰으로 API 호출 → 401
- [ ] 잘못된 형식의 토큰 → 401

### 데이터 유효성 오류
- [ ] 필수 필드 누락 → 400
- [ ] 잘못된 데이터 타입 → 400
- [ ] 문자열 길이 제한 초과 → 400
- [ ] 숫자 범위 초과 → 400

### 비즈니스 로직 오류
- [ ] 이미 진행 중인 세션이 있을 때 새 세션 생성 → 409
- [ ] 완료된 세션을 다시 시작 → 400
- [ ] 다른 사용자의 리소스 접근 → 403
- [ ] 존재하지 않는 리소스 접근 → 404

### AI 서비스 오류
- [ ] AI API 키 없을 때 적절한 오류 메시지
- [ ] AI 서비스 장애 시 원본 데이터 보존
- [ ] AI 응답 지연 시 타임아웃 처리

---

## ⚡ 성능 테스트

### 응답 시간
- [ ] 일반 API 응답 시간 < 2초
- [ ] AI 기능 응답 시간 < 10초
- [ ] 대용량 조회 응답 시간 < 3초
- [ ] 페이징 처리 성능 확인

### 동시 처리
- [ ] 동시 로그인 요청 처리
- [ ] 동시 노트 생성 요청 처리
- [ ] 동시 포모도로 세션 요청 처리

### 메모리 & 리소스
- [ ] 메모리 누수 없음 확인
- [ ] 데이터베이스 연결 풀 정상 동작
- [ ] 캐시 정상 동작 (Redis)

---

## 🔧 환경별 테스트

### 개발 환경 (H2)
- [ ] 인메모리 DB 정상 동작
- [ ] DDL 자동 생성 확인
- [ ] 테스트 데이터 초기화 확인

### 운영 환경 (MariaDB)
- [ ] 실제 DB 연결 확인
- [ ] 트랜잭션 정상 처리
- [ ] 데이터 영속성 확인

---

## 📝 테스트 실행 기록

### 테스트 실행 로그
```
테스트 실행 일시: 2024-01-15 14:30:00
테스트 환경: 로컬 개발 환경 (H2)
총 테스트 항목: 120개
통과: ___개
실패: ___개
건너뜀: ___개
```

### 발견된 이슈
1. **이슈 #1**: 
   - 설명: 
   - 상태: [해결됨/진행중/보류]
   - 해결 방법: 

2. **이슈 #2**:
   - 설명:
   - 상태: [해결됨/진행중/보류]
   - 해결 방법:

---

## ✅ 테스트 완료 서명

**테스터**: ________________  
**테스트 완료 일시**: ________________  
**최종 평가**: [통과/조건부 통과/실패]  

### 추가 권장사항
- [ ] 프론트엔드 연동 테스트 필요
- [ ] 부하 테스트 실시 권장  
- [ ] 보안 테스트 추가 검토
- [ ] 모니터링 시스템 연동 필요

---

*이 체크리스트는 Pomki v1.0.0 기준으로 작성되었습니다.* 